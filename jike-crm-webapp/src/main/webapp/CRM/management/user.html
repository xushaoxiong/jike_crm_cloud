<!--<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>账户管理</title>-->
	<!--<link rel="stylesheet" href="../css/bootstrap.min.css" />-->
	<!--<link rel="stylesheet" href="../js/scrollbar/css/jquery.mCustomScrollbar.min.css" />-->
	<!--<script type="text/javascript" src="../js/jquery-1.11.0.js" ></script>
	<script type="text/javascript" src="../js/pub/pub.js" ></script>-->
	<!--<script type="text/javascript" src="../js/scrollbar/js/jquery.mousewheel.min.js" ></script>
	<script type="text/javascript" src="../js/scrollbar/js/jquery.mCustomScrollbar.js" ></script>-->
	<!--<script type="text/javascript" src="js/myDate/My97DatePicker/WdatePicker.js" ></script>-->
	<!--<script type="text/javascript" src="../js/bootstrap.min.js" ></script>-->
	<!--<script type="text/javascript" src="../js/bootstrap-paginator.js" ></script>-->
	<!--<script type="text/javascript" src="js/management/user.js" ></script>-->
<!--</head>
<body>-->
	<style>
	.ZH-account button{
		margin-top: 20px;
	}
	.search-wap{
		padding: 20px 0;
	}
	.tableAccnt tr th{text-align: center;}
	.pagination-wap{
		line-height: 80px;
	}
	.total-page{
		padding-right: 15px;
	}
	.table tr td a{cursor: pointer;padding: 0 5px;}
	#newAdd .form-group{display: block;margin-bottom: 8px;}
	#newAdd label{
		width: 30% !important;
		text-align: right;
	}
</style>
<div class="wapper">
	<div class="ZH-account clearfix" style="width: 95%;">
	<h3 class="title pull-left">账户管理</h3>
	<button class="btn btn-primary pull-right addBtn"><span class="glyphicon glyphicon-plus"></span>新增账户</button>
</div>
<div class="search-wap form-inline clearfix">
	<!--<div class="form-group">
		<label>用户名：</label>
		<input type="text" class="form-control" placeholder="用户名"/>
	</div>-->
	<div class="form-group">
		<label>员工姓名：</label>
		<input type="text" class="form-control userName" placeholder="员工姓名"/>
	</div>
	<button class="btn btn-default userSearch">
		<span class="glyphicon glyphicon-search"></span>
	</button>
</div>
<table class="table table-bordered text-center table-responsive tableAccnt">
	<thead>
		<tr>
			<th>用户名</th>
			<th>员工姓名</th>
			<th>性别</th>
			<th>手机号</th>
			<th>邮箱</th>
			<th>工号</th>
			<th>是否在职</th>
			<th>入职日期</th>
			<th>角色分配</th>
			<th>操作</th>
		</tr>
	</thead>
	<tbody class="userList">

		
	</tbody>
</table>
<!--分页-->
<div class="pagination-wap">
	<div class="total-page pull-left">
		<span class="totalPage"></span>
		<span class="totalNum"></span>
	</div>
	<ul class="pagination">
	</ul> 
</div>
<!--新增弹框-->
<div class="modal " id="newAdd">
	<div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">新增账户</h4>
            </div>
            <div class="modal-body form-inline">
                <div class="form-group">
                	<label>登录名：</label>
                	<input type="text" value="登录名" class="form-control AccountInp"/>
                </div>
                <div class="form-group">
                	<label>员工姓名：</label>
                	<input type="text" value="姓名" class="form-control NameInp" />
                </div>
                <div class="form-group">
                	<label>密码：</label>
                	<input type="password" value="密码" class="form-control PwdInp" />
                </div>
                <div class="form-group genderGroup">
                	<label>性别：</label>
                	<input type="radio" gid="1" value="option1" name="optionsRadios"/>男
                	<input type="radio" gid="0" value="option0" name="optionsRadios"/>女
                </div>
                <div class="form-group">
                	<label>手机号：</label>
                	<input type="tel" class="form-control phoneInp" placeholder="手机号" />
                </div>
                <div class="form-group">
                	<label>邮箱：</label>
                	<input type="text" class="form-control emailInp" placeholder="邮箱" />
                </div>
                <div class="form-group">
                	<label>工号：</label>
                	<input type="text" class="form-control eplyeNumInp" placeholder="工号" />
                </div>
                <div class="form-group" id="workStats" style="display: none;">
                	<label>是否在职：</label>
                	<input type="radio" epid="0" value="option1" name="isEplment"/>在职
                	<input type="radio" epid="1" value="option0" name="isEplment"/>离职
                	
                </div>
                <div class="form-group">
                	<label>入职日期：</label>
                	<div class='input-group'>  
                		<p class="datep">
                			<input type="text" class="form-control" id="indate" data-format="dd-mm-yyyy" onclick="WdatePicker()" value="" style="width:120px; padding:5px 34px 5px 10px">
                		</p>
            		</div>  
                </div>
                <div class="form-group">
                	<label>权限组名称：</label>
                	<select class="form-control RoleInp">
                		<option idName='0'>管理员</option>
                		<option idName='1'>技术人员</option>
                		<option idName='2'>运营人员</option>
                		<option idName='3'>销售人员</option>
                		<option idName='0'>管理员</option>
                		<option idName='1'>技术人员</option>
                		<option idName='2'>运营人员</option>
                		<option idName='3'>销售人员</option>
                	</select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>
</div>
</div>
<script>
	$('.alert-del-wap').height($(window).height());
	
	//用户列表
	var paginatorJ={"name":"","start":1,"pageSize":10};
			
	
	$.ajax({
		
		type:"post",
		contentType: "application/json; charset=utf-8",
		url:ajaxUrl+'user/getUserByPage',
//		data:'{"name":"","start":1,"pageSize":2}',
		data:JSON.stringify(paginatorJ),
		dataType:'json',
		success:function(jo){
			console.log(jo);
			//分页
			var options={
				alignment:"center",
		        bootstrapMajorVersion:1,    //版本
		        currentPage:1,    //当前页数
		        numberOfPages:9,    //最多显示Page页
		        totalPages:jo.totalPage,    //所有数据可以显示的页数
		        onPageClicked:function(e,originalEvent,type,page){
			      	paginatorJ.start=page;
			      	clickPage(paginatorJ)
		        },
		        pageUrl:function(type, page, current){
		        	 
		        }        
		    }
		    $(".pagination").bootstrapPaginator(options);
			$('.totalPage').html('共'+jo.totalCount+'条');
			$('.totalNum').html(jo.totalPage+'页');
			var userHtml='';
			$.each(jo.userList,function(i,item){
				userHtml+='<tr>';
				userHtml+='<td class="loginName">'+item.loginName+'</td>';
				userHtml+='<td class="Name">'+item.name+'</td>';
				userHtml+='<td class="gender">'+item.loginName+'</td>';
				userHtml+='<td class="phone">'+item.gender+'</td>';
				userHtml+='<td class="email">'+item.email+'</td>';
				userHtml+='<td class="employeeNum">'+item.employeeNum+'</td>';
				userHtml+='<td class="isEmployment">'+item.isEmployment+'</td>';
				userHtml+='<td class="entryDate">'+item.entryDate+'</td>';
				userHtml+='<td class="roleId">'+item.roleName+'</td>';
				userHtml+='<td>';
					userHtml+='<a class="amend">修改</a>';
					userHtml+='<a class="del">删除</a>';
				userHtml+='</td>';
			userHtml+='</tr>';
			})
		$('.userList').html(userHtml);
		}
	});
	
	//点击跳转页
	function clickPage(PJson){
		$.ajax({
		type:"post",
		contentType: "application/json; charset=utf-8",
		url:ajaxUrl+'user/getUserByPage',
		data:JSON.stringify(PJson),
		dataType:'json',
		success:function(jo){
			var userHtml='';
			$.each(jo.userList,function(i,item){
				userHtml+='<tr>';
				userHtml+='<td class="loginName">'+item.loginName+'</td>';
				userHtml+='<td class="Name">'+item.name+'</td>';
				userHtml+='<td class="gender">'+item.gender+'</td>';
				userHtml+='<td class="phone">'+item.phone+'</td>';
				userHtml+='<td class="email">'+item.email+'</td>';
				userHtml+='<td class="employeeNum">'+item.employeeNum+'</td>';
				userHtml+='<td class="isEmployment">'+item.isEmployment+'</td>';
				userHtml+='<td class="entryDate">'+item.entryDate+'</td>';
				userHtml+='<td class="roleId">'+item.roleName+'</td>';
				userHtml+='<td>';
					userHtml+='<a class="userAmend">修改</a>';
					userHtml+='<a class="userDel">删除</a>';
				userHtml+='</td>';
			userHtml+='</tr>';
			})
		$('.userList').html(userHtml);
		}
	});
	}
	
	//搜索
	
	$('.userSearch').click(function(){
		var nameVal=$.trim($('.userName').val());
		paginatorJ.name=nameVal;
		clickPage(paginatorJ)
	})
	
	
	
	//新增
	 $(".addBtn").click(function(){
      	$("#newAdd").modal("toggle");
      	$('#workStats').hide();
      	$('.AccountInp').val('');
		$('.NameInp').val('');
		$(".RoleInp").find("option[idName='0']").prop("selected",true);
		

    });
    
    //日期
 
	//修改
	$(document).on('click','.amend',function(){
		var trs=$(this).parents('tr')
		var loginName=trs.find('.loginName').html();
		var Name=trs.find('.Name').html();
//		var genderID=trs.find('.gender').attr('gid');
//		var phone=$('.phone').eq(i).html();
//		var email=$('.email').eq(i).html();
//		var employeeNum=$('.employeeNum').eq(i).html();
//		var isEmp=$('.isEmployment').eq(i).attr('eid');
//		var entryDate=$('.entryDate').eq(i).html();
//		var Rid=$('.roleId').eq(i).attr('rid');
//		var Rid=$('.roleId').eq(i).html();
//		$("#newAdd").modal("toggle");
//		$('#workStats').show();//是否在职
//		$('.AccountInp').val(loginName);
//		$('.NameInp').val(Name);
//		$('.genderGroup').find("input[gid='"+genderID+"']").prop('checked',true);
//		$('.phoneInp').val(phone);
//		$('.emailInp').val(email);
//		$('.eplyeNumInp').val(employeeNum);
//		$('#workStats').find("input[epid='"+isEmp+"']").prop('checked',true);
//		$('#indate').val(entryDate);
//		$(".RoleInp").find("option[idName='"+Rid+"']").prop("selected",true);
	})
//	$('.userAmend').each(function(i){
//		$(this).click(function(){
//			var loginName=$('.loginName').eq(i).html();
//			var Name=$('.Name').eq(i).html();
//			var genderID=$('.gender').eq(i).attr('gid');
//			var phone=$('.phone').eq(i).html();
//			var email=$('.email').eq(i).html();
//			var employeeNum=$('.employeeNum').eq(i).html();
//			var isEmp=$('.isEmployment').eq(i).attr('eid');
//			var entryDate=$('.entryDate').eq(i).html();
//			var Rid=$('.roleId').eq(i).attr('rid');
//			var Rid=$('.roleId').eq(i).html();
//			$("#newAdd").modal("toggle");
//			$('#workStats').show();//是否在职
//			$('.AccountInp').val(loginName);
//			$('.NameInp').val(Name);
//			$('.genderGroup').find("input[gid='"+genderID+"']").prop('checked',true);
//			$('.phoneInp').val(phone);
//			$('.emailInp').val(email);
//			$('.eplyeNumInp').val(employeeNum);
//			$('#workStats').find("input[epid='"+isEmp+"']").prop('checked',true);
//			$('#indate').val(entryDate);
//			$(".RoleInp").find("option[idName='"+Rid+"']").prop("selected",true);
//			
//			
//		})
//	})
	//删除
	$('.userDdel').click(function(){
		var tr=$(this).parents('tr');
		pub.Alt('确定删除？',true,function(){
			$('.confirm').click(function(){
				tr.remove();
				$('.alert-del').hide();
			})
		})
	})
	
    
    var H=$(window).height()-60;
	$(".wapper").mCustomScrollbar({
		set_height:H,
		scrollButtons:{enable:true},
		theme:"minimal-dark",
		scrollbarPosition:"relative",
	
		
	});
//})

//	</body>
//</html>



